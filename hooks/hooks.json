{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Code has been written/modified. Execute Learn Quest auto-explanation feature.\n\n## Check Configuration\n\nFirst, check settings from `~/.learn-quest/config.json` or `./.learn-quest/config.json`.\n\n- If `trigger.on_task_complete` is false, do not output anything.\n- If true, provide learning points in the format below.\n- Check `language` setting for output language (en/ko).\n\n## Output Format\n\n```\nğŸ® LEARN QUEST - Learning Points\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n[If features.info is true]\nğŸ“š What was done (Info)\n- Explain what was just implemented\n- Why it was implemented this way\n\n[If features.direction is true]\nğŸ”„ Points to consider (Direction)\n- Optimization opportunities\n- Alternative approaches\n\n[If features.cs_knowledge is true]\nğŸ’¡ Related CS Knowledge\n- Patterns/concepts used\n- Relevant computer science principles\n\n[If features.quiz is true]\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“ Quiz\n[Generate a quiz question - can be multiple choice, true/false, or short answer based on the concept]\n```\n\n## Learning History Tracking\n\nAfter providing learning points:\n1. Read `~/.learn-quest/history.json` (create if doesn't exist)\n2. Increment `totalLearnings` counter\n3. Update `lastSession` to today's date\n4. Save the updated history\n\nHistory format:\n```json\n{\n  \"totalLearnings\": 0,\n  \"lastSession\": \"2026-01-27\"\n}\n```\n\n## Level-Based Depth\n\n- Bronze: Basic explanation, simple terminology\n- Silver: Implementation patterns, best practices\n- Gold: Trade-offs, optimization\n- Platinum: Architectural perspective\n- Diamond: Strategic/organizational perspective\n\n## Language Support\n\n- If `language` is \"ko\", output in Korean\n- If `language` is \"en\" or not set, output in English\n\n## Notes\n\n- Use default values if config file doesn't exist (trigger: true, level: silver, language: en)\n- Keep it concise, focus on key points\n- Maintain RPG theme"
          }
        ]
      },
      {
        "matcher": "Read|Grep|Glob",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "User has been reading/exploring code. Check if this is a learning opportunity for passive mode.\n\n## Check Configuration\n\nFirst, check settings from `~/.learn-quest/config.json` or `./.learn-quest/config.json`.\n\n- If `passive.enabled` is false, do not output anything and skip this hook.\n- Check `passive.frequency` setting to determine whether to show learning elements.\n\n## Frequency Logic\n\nRead `~/.learn-quest/history.json` to get `totalLearnings` count.\n\n### Frequency Calculation\n\n1. **If frequency is \"auto\":**\n   - Bronze level + totalLearnings < 20 â†’ high frequency (80% chance)\n   - Silver level + totalLearnings < 50 â†’ medium frequency (50% chance)\n   - Gold level + totalLearnings < 100 â†’ medium-low frequency (30% chance)\n   - Platinum/Diamond or high totalLearnings â†’ low frequency (15% chance)\n\n2. **If frequency is \"high\":** 80% chance\n3. **If frequency is \"medium\":** 50% chance\n4. **If frequency is \"low\":** 20% chance\n\nUse random decision based on percentage. If decision is to skip, output nothing.\n\n## Learning Opportunity Detection\n\nBefore adding learning elements, evaluate:\n- Is the user exploring code to understand it? (learning opportunity)\n- Is the user just searching for a specific file/function? (not a learning opportunity)\n- Did the user ask a question about the code? (learning opportunity)\n\nOnly add learning elements if this appears to be a genuine learning opportunity.\n\n## Output Format (if triggered)\n\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ® LEARN QUEST (Passive)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n[If features.direction is true]\nğŸ”„ Points to consider\n- Key insight or consideration about this code\n- Alternative approach or pattern to be aware of\n\n[If features.cs_knowledge is true]\nğŸ’¡ Related Concept\n- One relevant CS concept briefly explained\n\n[If features.quiz is true - keep it simple]\nğŸ“ Quick Check: [One simple question about the code/concept]\n```\n\n## Learning History Update\n\nIf learning elements were shown:\n1. Read `~/.learn-quest/history.json`\n2. Increment `totalLearnings`\n3. Update `lastSession`\n4. Save the file\n\n## Level-Based Depth\n\n- Bronze: Simple, encouraging explanations\n- Silver: Practical patterns and tips\n- Gold: Deeper insights, trade-offs\n- Platinum: Architectural considerations\n- Diamond: Strategic perspective\n\n## Language Support\n\n- Check `language` setting (en/ko)\n- Output in the configured language\n\n## Notes\n\n- Keep passive mode output SHORT and non-intrusive\n- Do not interrupt the user's flow\n- Focus on ONE key insight rather than multiple points\n- If no clear learning opportunity, output nothing"
          }
        ]
      }
    ]
  }
}
